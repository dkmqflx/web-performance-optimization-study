## 3-4) 이미지 사이즈 최적화

- 동영상도 사이즈를 줄여주면 된다

- 동영상도 가로, 세로 사이즈 가지고 있고, 화질에 따라 용량이 달라진다

- 물론 거기에 Frame rate나 기타등등 이미지 보다 복잡한 개념이 있지만

- 완벽히 동영상에 특화된 서비스가 아니라면 그렇게 까지 알 필요 없다

- 여기서는 단순하게 동영상을 더 작은 사이즈로 압축해주는 툴을 사용해서 동영상을 최적화 해준다

- 여기서 주의할 것은 동영상의 화질을 저하 시키는 작업이다

- 즉, 동영상이 메인컨텐츠라면 이 작업 추천하지 않고 선명하게 고화질로 사용자에게 보여주는 것을 추천

- 이런 사이트처럼 단순히 디자인적인 요소, 동영상이 메인 컨텐츠가 아닌 서비스에서 동영상을 최적화 하는 방법이다

- [https://www.media.io/ko/compress-mp4.html](https://www.media.io/ko/compress-mp4.html)

  - 동영상의 사이즈 현재는 54.5MB

  - WEBM이라는 WEBP와 같은 형식 있다.

  - WEBM으로 다운로드 하면, 용량이 줄어들고 화질도 안 좋아 진 것을 확인할 수 있다

```js
import video from '../assets/_banner-video.mp4';
```

- WEBM은 지원하지 않는 브라우저가 있는 경우가 있다

- 이러한 경우, WEBM을 지원하지 않는 경우 MP4를 로드하라는 코드를 추가해주어야 한다

- 추가로 mp4 이미지도 압축해준 다음에 추가해준다

```html
<video
  className="absolute translateX--1/2 h-screen max-w-none min-w-screen -z-1 bg-black min-w-full min-h-screen"
  autoplay
  loop
  muted
>
  <source src="{video_webm}" type="video/webm" />
  <source src="{video}" type="video/mp4" />
</video>
```

- 만약 webm을 못불러오는 경우 mp4를 불러오는데 아래처럼 보드를 수정하면 이를 확인할 수 있다

```html
<source src={video_webm + 's'} type='video/webm' />
```

- 문제는 동영상의 사이즈를 줄이는 방법은 화질이 저하되기 때문에 사용자에게 오히려 불편함을 줄 수 있다는 것이다

- 그래서 화질과 동영상의 사이즈를 저울질을 잘 해서 어느정도 수준으로 맞출지를 잘 결정을 해야 한다

- 첫번째로 화질도 좋게 하고 싶고 사이즈를 줄이고 싶다면 동영상의 길이를 줄이고 반복적으로 만드는 것도 하나의 방법이 될 수 있다

- 두번째는 화질을 줄이고 동영상 위에 어떤 패턴 같은 것들을 덮어 씌움으로서 동영상의 화질이 저하된 것을 사용자가 눈치채지 못하게 하는 방법이 있다

- 현재도 `BannerVideo`라는 클래스를 보면 아래처럼 4x4 이미지를 background로 계속해서 그려주고 있다

- 실제 확대를 해보면 점 같은 것들이 계속해서 반복되는 것을 볼 수 있다

```css
.bg-texture {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23000000' fill-opacity='0.84' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
}
```

- 무엇인가 위에 덮혀져 있기 때문에 화질이 떨어져도 사용자가 쉽게 눈치채지 못하는 효과가 있다

- 해당 효과가 적용된 것과 적용되지 않는 것을 비교해 본다

- 지금 같은 경우는 워낙 화질이 떨어져서 크게 차이를 못 느낄 수 있다

- 또 다른 방법은 css의 blur 속성을 사용하는 것이다

```css
filter: blur(5px);
```

- 화면을 아예 blur 처리함으로서 화질이 저하되어 있다는 것을 느낄 수 없다.

- 이미 흐려져 있으니까.

- 물론 동영상이 메인 컨텐츠가 아닌 경우에 사용할수 있다

- blur처리 바로하면 텍스트도 blur 처리가 되어 있는데, 이 부분은 바깥으로 빼서 blur 처리가 되지 않도록 한다

---

### Q. 1개의 동영상을 다운로드 받는데 네트워크 탭에서 여러번 받는지, 궁금합니다.

- 안녕하세요? 강의 재미있게 보고 있는 중에 네트워크 탭에서 같은 동영상 리소스를 계속 받는 여러 탭이 있어서 여쭙니다.

- 1개의 동영상을 다운로드 받는데 네트워크 탭에서 여러번 받는지, 궁금합니다.

### A. video 로드 방식에 대해서 질문을 주셨는데요,

- 모던 브라우저(Chrome, Firefox 등등)에서는 이런 video 소스에 대한 streaming 방식을 제공하고 있습니다.

- 그래서 필요한 데이터(영상의 앞 부분)를 우선으로 내려받고 순차적으로 뒤의 데이터도 로드합니다.

- 아래 링크는 HTML의 video 태그의 로드 방식에 대해 상세히 다룬 글이니 참고하시면 좋을 것 같습니다.

- (https://medium.com/canal-tech/how-video-streaming-works-on-the-web-an-introduction-7919739f7e1)

<br/>

### Q. webp 확장자질문

- 강의중에는 클라이언트에 저장된 확장자 2개의 이미지를 사용해서 분기처리를 하셨는데요,

- 서버에서 받아오는 이미지파일을 분기처리 할려면(webp를 지원하지않는 브라우저를 위해)

- webp파일 이미지와 jpg(또는 png) 파일 이미지 총 2개 파일 이미지를 보내줘야 분기처리가 가능한가요?

- 아니면 서버에서 1개의 확장자 이미지를 보내주면

- jpg -> webp 또는 webp->jpg로 바꾸어서 분기처리 하는방법은 없을까요?

### A. 이미지 포맷별 분기 처리에 대해서 질문을 주셨는데요,

- 강의에서 적용한 picture 태그를 통한 분기는 이미지를 모두 불러와서 분기를 하는 것이 아니라,

- source 태그에 명시된 type 속성을 보고 브라우저가 지원 가능한 타입인지를 판단합니다.

- 따라서 굳이 파일을 로드해보지 않고도 지원 가능 여부를 알 수 있습니다.

- 반대로 파일 자체는 지원이 가능하더라도 type 속성에 이상한 값을(예를들어, webt라거나) 넣게되면 파일의 확장자와 상관없이 지원할 수 없는 타입이라고 판단하여 로드하지 않습니다.
